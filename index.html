<html lang="en">
  <head>
    <title>URL generator</title>
    <style>
      .hidden { display: none; }
      .step { margin: 10px; }
      table { table-layout:fixed; }
      .ovf { overflow: hidden; white-space: nowrap }
    </style>
    <script src="filters.js"></script>
    <script src="browser.js"></script>
    <script>
      var baseUrl="#base#";

      function ready(){
        document.querySelector('#url').onkeyup=function(){
          theurl=document.querySelector('#url').value;

          document.querySelector("#output").innerHTML=location.href+theurl;
        }

        Object.keys(module.exports).forEach(function(fn){
          document.querySelector("#functionInfo").innerHTML+="<tr><td>"+fn+"</td><td>"+module.exports[fn].info+"</td></tr>";
        });
      }


    </script>
  </head>
  <body onload="ready();">
    <div class="step" id="step1">
    <h3>Enter JSON URL</h3>
    #base#<input type="text" size="100" name="url" id="url"></input><br/>
    <button id="fetch" onclick="fetch(document.querySelector('#url').value)">Test JSON URL</button><br/>
  </div>
  <div class="step hidden" id="step2">
    <div id="jsonout"></div>
    <button name="testFilters" id="testFilters" onclick="testFilters()">Test filters</button>
  </div>
  <div class="step hidden" id="filterTest">
    <table width="80%"><thead><th width="20%">Possible Filters</th><th width="80%">Output</th></thead>
      <tbody id="filterOutBody"></tbody>
    </table>
  </div>
  <div class="step hidden" id="step9">
    <div>URL to use: <span id="output"></span></div>
  </div>
  <table style="position:absolute;bottom:0px;">
    <thead>
      <tr><th>Function</th><th>Info</th></tr>
    </thead>
    <tbody id="functionInfo">
    </tbody>
  </table>
  </body>
</html>
